"use strict";(globalThis["webpackChunkquasar_project"]=globalThis["webpackChunkquasar_project"]||[]).push([[258],{2258:(e,a,l)=>{l.r(a),l.d(a,{default:()=>_});var o=l(9835),t=l(6970),r=l(1957);function n(e,a,l,n,s,d){const i=(0,o.up)("q-btn"),p=(0,o.up)("q-badge"),b=(0,o.up)("q-td"),m=(0,o.up)("q-icon"),c=(0,o.up)("q-table");return(0,o.wg)(),(0,o.j4)(c,{title:"Заявки",rows:e.orders,columns:e.columns,"row-key":"client_name","rows-per-page-label":"Заявок на странице",flat:"",bordered:"",pagination:e.initialPagination},{"top-right":(0,o.w5)((()=>[(0,o.Wm)(i,{color:"primary","icon-right":"add",label:"Добавить","no-caps":"",onClick:e.openDialog},null,8,["onClick"])])),"body-cell-state":(0,o.w5)((a=>[(0,o.Wm)(b,{props:a},{default:(0,o.w5)((()=>[(0,o.Wm)(p,{color:e.getColor(a.value),label:a.value},null,8,["color","label"])])),_:2},1032,["props"])])),"body-cell-dadd":(0,o.w5)((a=>[(0,o.Wm)(b,{props:a},{default:(0,o.w5)((()=>[(0,o.Uk)((0,t.zw)(e.formatDate(a.row.dadd)),1)])),_:2},1032,["props"])])),"body-cell-stg":(0,o.w5)((e=>[(0,o.Wm)(b,{props:e},{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.row.stg,((e,a)=>((0,o.wg)(),(0,o.iD)("span",{key:a,class:"q-mr-sm"},(0,t.zw)(e),1)))),128))])),_:2},1032,["props"])])),"body-cell-person_phone":(0,o.w5)((e=>[(0,o.Wm)(b,{props:e},{default:(0,o.w5)((()=>[(0,o.Uk)(" + "+(0,t.zw)(e.row.person_phone),1)])),_:2},1032,["props"])])),"body-cell-delete":(0,o.w5)((a=>[(0,o.Wm)(b,{props:a,class:"icon-btn"},{default:(0,o.w5)((()=>[(0,o.Wm)(m,{name:"delete",size:"1.2rem",onClick:l=>e.deleteOrderData(a.row.id)},null,8,["onClick"])])),_:2},1032,["props"])])),"body-cell-more":(0,o.w5)((a=>[(0,o.Wm)(b,{props:a,class:"icon-btn"},{default:(0,o.w5)((()=>[(0,o.Wm)(m,{name:"arrow_forward_ios",size:"1.2rem",class:"text-gray",onClick:(0,r.iM)((l=>e.openTab(a.row)),["prevent"])},null,8,["onClick"])])),_:2},1032,["props"])])),_:1},8,["rows","columns","pagination"])}l(9665);var s=l(3100),d=l(9302);const i=[{name:"client_name",label:"Клиент",required:!0,align:"left",field:e=>e.client_name?e.client_name:e.person_fullname,format:e=>`${e}`,sortable:!0},{name:"num",label:"№ Заявки",field:"num",sortable:!0,sort:(e,a)=>e-a,align:"centre"},{name:"stg",label:"Продукт",field:"stg",align:"centre"},{name:"dadd",label:"Дата",field:"dadd",sortable:!0,sort:(e,a)=>parseInt(e,10)-parseInt(a,10),align:"centre"},{name:"state",label:"Статус",field:"state"},{name:"person_phone",label:"Номер телефона",field:"person_phone"},{name:"delete",label:"Удалить",field:"id"},{name:"more",label:"Подробнее",field:"id",sortable:!1}],p=(0,o.aZ)({name:"OrdersGrid",setup(){const e=(0,d.Z)();return{columns:i,dialogForm:!0,initialPagination:{rowsPerPage:10},showLoading(){e.loading.show({message:"Загрузка..."})},hideLoading(){e.loading.hide()}}},computed:{...(0,s.rn)({orders:e=>e.allTabs.orders,tabForm:e=>e.allTabs.tabForm,stateColor:e=>e.allTabs.stateColor}),...(0,s.Se)({hasNewTab:"allTabs/hasNewTab",orderIndex:"allTabs/orderIndex",hasItem:"allTabs/hasItem",tabIndex:"allTabs/tabIndex"})},methods:{...(0,s.nv)({getOrderList:"allTabs/getOrderList",getOrderData:"allTabs/getOrderData"}),...(0,s.OI)({openDialog:"allTabs/openDialog",deleteOrder:"allTabs/deleteOrder",addNewTab:"allTabs/addNewTab",deleteTab:"allTabs/deleteTab"}),formatDate(e){return new Date(e).toLocaleDateString()},getColor(e){const a=this.stateColor[e];return a?a.color:"#FB8C00"},deleteOrderData(e){const a=this.orderIndex(e),l=this.tabIndex(e);-1!==l&&this.deleteTab(l),this.deleteOrder(a)},async openTab(e){let a={name:`application ${e.num}`,label:`Заявка ${e.num}`,id:e.id,route:"/appl/"+e.id};this.hasNewTab(a)||this.addNewTab(a),this.$router.push("/appl/"+e.id)}},mounted(){this.orders.length<2&&(this.showLoading(),this.getOrderList().then((()=>this.hideLoading())))}});var b=l(1639),m=l(4204),c=l(4455),u=l(7220),g=l(990),w=l(2857),h=l(9984),T=l.n(h);const f=(0,b.Z)(p,[["render",n]]),_=f;T()(p,"components",{QTable:m.Z,QBtn:c.Z,QTd:u.Z,QBadge:g.Z,QIcon:w.Z})}}]);