"use strict";(globalThis["webpackChunkquasar_project"]=globalThis["webpackChunkquasar_project"]||[]).push([[681],{4681:(e,a,l)=>{l.r(a),l.d(a,{default:()=>f});var r=l(9835),t=l(6970),o=l(1957);function n(e,a,l,n,s,d){const i=(0,r.up)("q-btn"),p=(0,r.up)("q-badge"),b=(0,r.up)("q-td"),m=(0,r.up)("q-icon"),c=(0,r.up)("q-table");return(0,r.wg)(),(0,r.j4)(c,{title:"Заявки",rows:e.orders,columns:e.columns,"row-key":"client_name","rows-per-page-label":"Заявок на странице",flat:"",bordered:"",pagination:e.initialPagination},{"top-right":(0,r.w5)((()=>[(0,r.Wm)(i,{color:"primary","icon-right":"add",label:"Добавить","no-caps":"",onClick:e.openDialog},null,8,["onClick"])])),"body-cell-state":(0,r.w5)((a=>[(0,r.Wm)(b,{props:a},{default:(0,r.w5)((()=>[(0,r.Wm)(p,{color:e.getColor(a.value),label:a.value},null,8,["color","label"])])),_:2},1032,["props"])])),"body-cell-dadd":(0,r.w5)((a=>[(0,r.Wm)(b,{props:a},{default:(0,r.w5)((()=>[(0,r.Uk)((0,t.zw)(e.formatDate(a.row.dadd)),1)])),_:2},1032,["props"])])),"body-cell-stg":(0,r.w5)((e=>[(0,r.Wm)(b,{props:e},{default:(0,r.w5)((()=>[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.row.stg,((e,a)=>((0,r.wg)(),(0,r.iD)("span",{key:a,class:"q-mr-sm"},(0,t.zw)(e),1)))),128))])),_:2},1032,["props"])])),"body-cell-person_phone":(0,r.w5)((e=>[(0,r.Wm)(b,{props:e},{default:(0,r.w5)((()=>[(0,r.Uk)(" + "+(0,t.zw)(e.row.person_phone),1)])),_:2},1032,["props"])])),"body-cell-delete":(0,r.w5)((a=>[(0,r.Wm)(b,{props:a,class:"icon-btn"},{default:(0,r.w5)((()=>[(0,r.Wm)(m,{name:"delete",size:"1.2rem",onClick:l=>e.deleteOrderData(a.row.id)},null,8,["onClick"])])),_:2},1032,["props"])])),"body-cell-more":(0,r.w5)((a=>[(0,r.Wm)(b,{props:a,class:"icon-btn"},{default:(0,r.w5)((()=>[(0,r.Wm)(m,{name:"arrow_forward_ios",size:"1.2rem",class:"text-gray",onClick:(0,o.iM)((l=>e.openTab(a.row)),["prevent"])},null,8,["onClick"])])),_:2},1032,["props"])])),_:1},8,["rows","columns","pagination"])}l(9665);var s=l(3100);const d=[{name:"client_name",label:"Клиент",required:!0,align:"left",field:e=>e.client_name?e.client_name:e.person_fullname,format:e=>`${e}`,sortable:!0},{name:"num",label:"№ Заявки",field:"num",sortable:!0,sort:(e,a)=>e-a,align:"centre"},{name:"stg",label:"Продукт",field:"stg",align:"centre"},{name:"dadd",label:"Дата",field:"dadd",sortable:!0,sort:(e,a)=>parseInt(e,10)-parseInt(a,10),align:"centre"},{name:"state",label:"Статус",field:"state"},{name:"person_phone",label:"Номер телефона",field:"person_phone"},{name:"delete",label:"Удалить",field:"id"},{name:"more",label:"Подробнее",field:"id",sortable:!1}],i=(0,r.aZ)({name:"OrdersGrid",setup(){return{columns:d,dialogForm:!0,initialPagination:{rowsPerPage:10}}},computed:{...(0,s.rn)({orders:e=>e.allTabs.orders,tabForm:e=>e.allTabs.tabForm,stateColor:e=>e.allTabs.stateColor}),...(0,s.Se)({hasNewTab:"allTabs/hasNewTab",orderIndex:"allTabs/orderIndex",hasItem:"allTabs/hasItem",tabIndex:"allTabs/tabIndex"})},methods:{...(0,s.nv)({getOrderList:"allTabs/getOrderList",getOrderData:"allTabs/getOrderData"}),...(0,s.OI)({openDialog:"allTabs/openDialog",deleteOrder:"allTabs/deleteOrder",addNewTab:"allTabs/addNewTab",deleteTab:"allTabs/deleteTab"}),formatDate(e){return new Date(e).toLocaleDateString()},getColor(e){const a=this.stateColor[e];return a?a.color:"#FB8C00"},deleteOrderData(e){const a=this.orderIndex(e),l=this.tabIndex(e);-1!==l&&this.deleteTab(l),this.deleteOrder(a)},async openTab(e){let a={name:`application ${e.num}`,label:`Заявка ${e.num}`,id:e.id,route:"/appl/"+e.id};this.hasNewTab(a)||this.addNewTab(a),this.$router.push("/appl/"+e.id)}},mounted(){this.getOrderList()}});var p=l(1639),b=l(4204),m=l(4455),c=l(7220),u=l(990),w=l(2857),g=l(9984),T=l.n(g);const h=(0,p.Z)(i,[["render",n]]),f=h;T()(i,"components",{QTable:b.Z,QBtn:m.Z,QTd:c.Z,QBadge:u.Z,QIcon:w.Z})}}]);